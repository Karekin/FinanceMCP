# Dify å¿«é€Ÿé›†æˆæŒ‡å—

## ğŸš€ 5åˆ†é’Ÿå¿«é€Ÿå¼€å§‹

### 1. éªŒè¯æœåŠ¡çŠ¶æ€
```bash
curl https://finance-mcp-ten.vercel.app/health
```

### 2. åœ¨ Dify ä¸­åˆ›å»ºå·¥å…·

#### æ­¥éª¤ 1: ç™»å½• Dify
è®¿é—® [dify.ai](https://dify.ai) å¹¶ç™»å½•

#### æ­¥éª¤ 2: åˆ›å»ºåº”ç”¨
- ç‚¹å‡» "åˆ›å»ºåº”ç”¨"
- é€‰æ‹© "èŠå¤©åŠ©æ‰‹"
- åº”ç”¨åç§°ï¼š`é‡‘èæ•°æ®åŠ©æ‰‹`

#### æ­¥éª¤ 3: æ·»åŠ å·¥å…·
è¿›å…¥åº”ç”¨è®¾ç½® â†’ å·¥å…· â†’ æ·»åŠ å·¥å…· â†’ è‡ªå®šä¹‰å·¥å…·

### 3. é…ç½®æ ¸å¿ƒå·¥å…·

#### å·¥å…· 1: è‚¡ç¥¨æ•°æ®æŸ¥è¯¢

**åŸºæœ¬ä¿¡æ¯**:
- å·¥å…·åç§°: `è‚¡ç¥¨æ•°æ®æŸ¥è¯¢`
- å·¥å…·æè¿°: `è·å–è‚¡ç¥¨å†å²è¡Œæƒ…å’ŒæŠ€æœ¯æŒ‡æ ‡æ•°æ®`

**API é…ç½®**:
- URL: `https://finance-mcp-ten.vercel.app/mcp`
- æ–¹æ³•: `POST`
- Headers: `Content-Type: application/json`

**è¯·æ±‚ä½“**:
```json
{
  "jsonrpc": "2.0",
  "id": 1,
  "method": "tools/call",
  "params": {
    "name": "stock_data",
    "arguments": {
      "code": "{{è‚¡ç¥¨ä»£ç }}",
      "market_type": "{{å¸‚åœºç±»å‹}}",
      "start_date": "{{å¼€å§‹æ—¥æœŸ}}",
      "end_date": "{{ç»“æŸæ—¥æœŸ}}",
      "indicators": "{{æŠ€æœ¯æŒ‡æ ‡}}"
    }
  }
}
```

**å‚æ•°é…ç½®**:
- `è‚¡ç¥¨ä»£ç `: æ–‡æœ¬è¾“å…¥ï¼Œç¤ºä¾‹ï¼š`000001.SZ`
- `å¸‚åœºç±»å‹`: ä¸‹æ‹‰é€‰æ‹©ï¼Œé€‰é¡¹ï¼š`cn`(Aè‚¡)ã€`us`(ç¾è‚¡)ã€`hk`(æ¸¯è‚¡)
- `å¼€å§‹æ—¥æœŸ`: æ–‡æœ¬è¾“å…¥ï¼Œæ ¼å¼ï¼š`20240101`
- `ç»“æŸæ—¥æœŸ`: æ–‡æœ¬è¾“å…¥ï¼Œæ ¼å¼ï¼š`20240131`
- `æŠ€æœ¯æŒ‡æ ‡`: æ–‡æœ¬è¾“å…¥ï¼Œç¤ºä¾‹ï¼š`ma(10,20) rsi(14)`

#### å·¥å…· 2: è´¢ç»æ–°é—»æŸ¥è¯¢

**API é…ç½®**:
- URL: `https://finance-mcp-ten.vercel.app/mcp`
- æ–¹æ³•: `POST`
- Headers: `Content-Type: application/json`

**è¯·æ±‚ä½“**:
```json
{
  "jsonrpc": "2.0",
  "id": 2,
  "method": "tools/call",
  "params": {
    "name": "finance_news",
    "arguments": {
      "query": "{{æœç´¢å…³é”®è¯}}"
    }
  }
}
```

**å‚æ•°é…ç½®**:
- `æœç´¢å…³é”®è¯`: æ–‡æœ¬è¾“å…¥ï¼Œç¤ºä¾‹ï¼š`äººå·¥æ™ºèƒ½ é‡‘è`

#### å·¥å…· 3: å…¬å¸è´¢åŠ¡æ•°æ®

**API é…ç½®**:
- URL: `https://finance-mcp-ten.vercel.app/mcp`
- æ–¹æ³•: `POST`
- Headers: `Content-Type: application/json`

**è¯·æ±‚ä½“**:
```json
{
  "jsonrpc": "2.0",
  "id": 3,
  "method": "tools/call",
  "params": {
    "name": "company_performance",
    "arguments": {
      "ts_code": "{{è‚¡ç¥¨ä»£ç }}",
      "data_type": "{{æ•°æ®ç±»å‹}}",
      "start_date": "{{å¼€å§‹æ—¥æœŸ}}",
      "end_date": "{{ç»“æŸæ—¥æœŸ}}"
    }
  }
}
```

**å‚æ•°é…ç½®**:
- `è‚¡ç¥¨ä»£ç `: æ–‡æœ¬è¾“å…¥ï¼Œç¤ºä¾‹ï¼š`000001.SZ`
- `æ•°æ®ç±»å‹`: ä¸‹æ‹‰é€‰æ‹©ï¼Œé€‰é¡¹ï¼š`indicators`(è´¢åŠ¡æŒ‡æ ‡)ã€`balance_basic`(èµ„äº§è´Ÿå€ºè¡¨)ã€`income_basic`(åˆ©æ¶¦è¡¨)
- `å¼€å§‹æ—¥æœŸ`: æ–‡æœ¬è¾“å…¥ï¼Œæ ¼å¼ï¼š`20230101`
- `ç»“æŸæ—¥æœŸ`: æ–‡æœ¬è¾“å…¥ï¼Œæ ¼å¼ï¼š`20231231`

### 4. é…ç½®æç¤ºè¯

```
ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„é‡‘èæ•°æ®åˆ†æåŠ©æ‰‹ã€‚ä½ å¯ä»¥å¸®åŠ©ç”¨æˆ·ï¼š

1. æŸ¥è¯¢è‚¡ç¥¨å†å²è¡Œæƒ…å’ŒæŠ€æœ¯æŒ‡æ ‡
2. æœç´¢ç›¸å…³è´¢ç»æ–°é—»
3. åˆ†æå…¬å¸è´¢åŠ¡æ•°æ®
4. æä¾›æŠ•èµ„å»ºè®®

è¯·æ ¹æ®ç”¨æˆ·çš„é—®é¢˜é€‰æ‹©åˆé€‚çš„å·¥å…·ï¼Œå¹¶æä¾›è¯¦ç»†çš„åˆ†æç»“æœã€‚
```

### 5. æµ‹è¯•å¯¹è¯

**æµ‹è¯•ç”¨ä¾‹ 1**:
```
ç”¨æˆ·: å¸®æˆ‘æŸ¥è¯¢å¹³å®‰é“¶è¡Œ(000001.SZ)æœ€è¿‘ä¸€ä¸ªæœˆçš„è‚¡ä»·èµ°åŠ¿
```

**æµ‹è¯•ç”¨ä¾‹ 2**:
```
ç”¨æˆ·: æœç´¢å…³äºäººå·¥æ™ºèƒ½çš„æœ€æ–°è´¢ç»æ–°é—»
```

**æµ‹è¯•ç”¨ä¾‹ 3**:
```
ç”¨æˆ·: åˆ†æè…¾è®¯æ§è‚¡(00700.HK)çš„è´¢åŠ¡çŠ¶å†µ
```

## ğŸ”§ é«˜çº§é…ç½®

### é”™è¯¯å¤„ç†
åœ¨å·¥å…·é…ç½®ä¸­æ·»åŠ é”™è¯¯å¤„ç†ï¼š
```json
{
  "error_handling": {
    "retry_count": 3,
    "timeout": 30000
  }
}
```

### æ•°æ®æ ¼å¼åŒ–
é…ç½®è¾“å‡ºæ ¼å¼ï¼š
```json
{
  "response_format": {
    "type": "json",
    "template": "åŸºäºè·å–çš„æ•°æ®ï¼Œæˆ‘ä¸ºæ‚¨åˆ†æå¦‚ä¸‹ï¼š\n\n{{æ•°æ®å†…å®¹}}\n\nåˆ†æç»“è®ºï¼š{{åˆ†æç»“æœ}}"
  }
}
```

## ğŸ“‹ å®Œæ•´å·¥å…·åˆ—è¡¨

ä½ çš„ MCP æœåŠ¡æ”¯æŒä»¥ä¸‹å·¥å…·ï¼š

| å·¥å…·åç§° | åŠŸèƒ½æè¿° | ä¸»è¦å‚æ•° |
|---------|---------|---------|
| `stock_data` | è‚¡ç¥¨æ•°æ®æŸ¥è¯¢ | code, market_type, start_date, end_date |
| `finance_news` | è´¢ç»æ–°é—»æœç´¢ | query |
| `company_performance` | å…¬å¸è´¢åŠ¡æ•°æ® | ts_code, data_type, start_date, end_date |
| `macro_econ` | å®è§‚ç»æµæ•°æ® | indicator, start_date, end_date |
| `fund_data` | åŸºé‡‘æ•°æ®æŸ¥è¯¢ | ts_code, data_type |
| `index_data` | æŒ‡æ•°æ•°æ®æŸ¥è¯¢ | code, start_date, end_date |
| `money_flow` | èµ„é‡‘æµå‘æ•°æ® | ts_code, start_date, end_date |
| `block_trade` | å¤§å®—äº¤æ˜“æ•°æ® | code, start_date, end_date |
| `current_timestamp` | å½“å‰æ—¶é—´ | format |

## ğŸš¨ æ³¨æ„äº‹é¡¹

1. **æ—¥æœŸæ ¼å¼**: æ‰€æœ‰æ—¥æœŸå‚æ•°ä½¿ç”¨ `YYYYMMDD` æ ¼å¼
2. **è‚¡ç¥¨ä»£ç **: 
   - Aè‚¡: `000001.SZ` (æ·±åœ³), `600000.SH` (ä¸Šæµ·)
   - æ¸¯è‚¡: `00700.HK`
   - ç¾è‚¡: `AAPL`, `TSLA`
3. **æŠ€æœ¯æŒ‡æ ‡**: ä½¿ç”¨ç©ºæ ¼åˆ†éš”å¤šä¸ªæŒ‡æ ‡ï¼Œå¦‚ `ma(10,20) rsi(14)`
4. **è¯·æ±‚é¢‘ç‡**: å»ºè®®æ§åˆ¶è¯·æ±‚é¢‘ç‡ï¼Œé¿å…è¿‡äºé¢‘ç¹çš„è°ƒç”¨

## ğŸ†˜ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**Q: å·¥å…·è°ƒç”¨è¿”å›é”™è¯¯**
- æ£€æŸ¥ URL æ˜¯å¦æ­£ç¡®
- éªŒè¯å‚æ•°æ ¼å¼
- ç¡®è®¤æœåŠ¡çŠ¶æ€

**Q: æ•°æ®æ ¼å¼å¼‚å¸¸**
- æ£€æŸ¥ JSON è§£æ
- éªŒè¯å­—æ®µåç§°
- è°ƒæ•´æ ¼å¼åŒ–é…ç½®

**Q: å“åº”è¶…æ—¶**
- å¢åŠ è¶…æ—¶æ—¶é—´
- ä¼˜åŒ–æŸ¥è¯¢å‚æ•°
- æ£€æŸ¥ç½‘ç»œè¿æ¥

### è°ƒè¯•æ–¹æ³•

1. æ£€æŸ¥æœåŠ¡çŠ¶æ€ï¼š
```bash
curl https://finance-mcp-ten.vercel.app/health
```

2. æµ‹è¯•å·¥å…·è°ƒç”¨ï¼š
```bash
curl -X POST https://finance-mcp-ten.vercel.app/mcp \
  -H "Content-Type: application/json" \
  -d '{"jsonrpc":"2.0","id":1,"method":"tools/list"}'
```

3. æŸ¥çœ‹è¯¦ç»†æ—¥å¿—ï¼š
è®¿é—® Dify åº”ç”¨è®¾ç½®ä¸­çš„æ—¥å¿—é¡µé¢

---

æŒ‰ç…§ä»¥ä¸Šæ­¥éª¤ï¼Œä½ å°±å¯ä»¥åœ¨ 5 åˆ†é’Ÿå†…å®Œæˆ Dify ä¸ Finance MCP Server çš„é›†æˆï¼
